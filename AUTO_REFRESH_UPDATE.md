# 自动刷新功能更新 🔄

## 更新内容

GoldEye 插件现在支持**自动刷新功能**，完全同步东方财富网站的更新机制！

### ✨ 新功能特性

1. **60秒自动刷新**
   - 与东方财富网站的刷新频率完全同步
   - 每60秒自动重新加载页面数据

2. **可视化倒计时**
   - 插件底部显示金色渐变倒计时条
   - 实时显示距离下次刷新的剩余秒数
   - 例如："45秒后自动刷新"

3. **刷新状态提示**
   - 刷新时显示"正在刷新..."提示
   - 让用户清楚知道更新状态

## 🎨 界面变化

### 倒计时条样式

- **位置**: 弹窗底部
- **高度**: 24px
- **背景**: 金色渐变（#d4af37 → #f2d06b）
- **效果**: 与"金眼"主题完美匹配

![倒计时效果示意](示意图：底部金色渐变条，显示"XX秒后自动刷新")

## 📝 技术实现

### 修改的文件

#### 1. `popup.html`

```html
<!-- 新增倒计时显示元素 -->
<div id="refresh-timer">
  <span id="timer-text">60秒后自动刷新</span>
</div>
```

#### 2. `popup.css`

```css
/* iframe高度调整，为倒计时条留出空间 */
iframe {
  height: calc(100% - 24px);
}

/* 金色渐变倒计时条 */
#refresh-timer {
  height: 24px;
  background: linear-gradient(135deg, #d4af37 0%, #f2d06b 100%);
}
```

#### 3. `popup.js`

```javascript
// 60秒倒计时逻辑
let countdown = 60;

// 每秒更新显示
setInterval(updateTimer, 1000);

// 每60秒刷新iframe
setInterval(() => {
  frame.contentWindow.location.reload();
}, 60000);
```

## 🔍 同步机制说明

根据对东方财富网站的分析：

- 网站使用 **JavaScript AJAX 轮询**
- 刷新间隔：**60秒**
- 数据源：`push2.eastmoney.com/api/qt/clist/get`

GoldEye 插件完全匹配这个机制，确保数据始终保持最新！

## 🚀 如何体验

1. **重新加载插件**
   - 打开 `chrome://extensions/`
   - 找到 GoldEye 插件
   - 点击 🔄 刷新按钮

2. **打开插件**
   - 点击工具栏的金色眼睛图标
   - 查看底部的倒计时条
   - 等待60秒，观察自动刷新

3. **验证效果**
   - 倒计时从60秒开始递减
   - 到0秒时显示"正在刷新..."
   - iframe内容自动更新
   - 倒计时重置为60秒

## 📊 性能说明

- **内存占用**: 极低（仅定时器）
- **CPU占用**: 忽略不计
- **网络请求**: 每60秒一次iframe reload
- **用户体验**: 无感知刷新，不影响浏览

## 🎯 总结

现在 GoldEye 插件提供了：
✅ **实时金价展示**  
✅ **自动刷新（60秒）**  
✅ **可视化倒计时**  
✅ **与官网同步**  
✅ **精美的界面设计**

完全实现了"金价小窗 + 极速查看 + 自动更新"的功能目标！🎉
